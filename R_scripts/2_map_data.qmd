---
title: "2_map_data"
author: "Shayna A. Sura"
format: html
editor: source
---



```{r load packages}
#| echo: false

library(tidyverse) # includes and loads the packages listed below
# library(readr)
# library(tidyr)
# library(dplyr)
# library(ggplot2)
# library(lubridate)

library(here) # helps with paths for files

# libraries for spatial data & animating it...
library(maps)
library(gganimate)
library(gifski) # for gif output
library(av) # for video output

# not sure I need these libraries for what I'm trying to do.
# library(terra)
# library(geodata)
# library(predicts)

```


## Accessing objects from other Quarto documents in this R Project???

### Not sure this is possoible to do. Might be better to export the clean data files from my other quarto document and then reload / import them into this quarto document...

```{r accessing data from 1_organize_data QMD file}

# setwd("R_scripts/")
# 
# source("1_organize_data.qmd", local = FALSE)
# 
# getwd()

```


```{r reading in cleaned bio data}

bio_data_2 <- read_csv(file = "data/clean_data/bio_data.csv")

head(bio_data_2)

```



## obtain bounding coordinates for making maps

```{r}

# Determine geographic extent of our data
# use ceiling() and floor() to round up and down to the nearest integer

max_lat <- ceiling(max(bio_data_2$DECSLAT))
min_lat <- floor(min(bio_data_2$DECSLAT))
max_lon <- ceiling(max(bio_data_2$DECSLON))
min_lon <- floor(min(bio_data_2$DECSLON))

```



```{r obtain GoM map}


gulf_of_mexico_info <- map_data("usa", region = ".")

base_map2 <- ggplot(data = gulf_of_mexico_info,
                   mapping = aes (x = long, y = lat, group = group)) +
  geom_polygon() +
  coord_quickmap(xlim = c(min_lon, max_lon),
                 ylim = c(min_lat, max_lat)) +
  theme_void()


base_map # I first tested this without giving limits for latitude and longitude
base_map2


## at some point, will probably want to include the land borders of Mexico in the base map. But the maps package doesn't have a map just for Mexico, so I would need to start with a world map...

## Use ggmap instead?


```


```{r subset of bio data to test mapping for 1 species overtime}


lionfish_data <- bio_data_2 %>% 
  filter(GENUS_BGS == "PTEROIS")

head(lionfish_data)

```


```{r mapping lionfish data}

lionfish_map <- base_map2 +
  geom_point(data = lionfish_data,
             aes(x = DECSLON,
                 y = DECSLAT,
                 group = YR,
                 color = YR))

lionfish_map

lionfish_map_animated <- lionfish_map +
  transition_time(YR) +
  ggtitle('Year: {frame_time}',
          subtitle = 'Frame{frame} of {nframes}')

num_years <- max(bio_data_2$YR - min(bio_data_2$YR)) + 1
animate(lionfish_map_animated, nframes = num_years)

lionfish_map_animated


```




```{r}


## writing some code down that will be helpful for mapping the SEAMAP trawl data


# Determine geographic extent of our data
# use ceiling() and floor() to round up and down to the nearest integer

# max_lat <- ceiling(max(obs_data$latitude))
# min_lat <- floor(min(obs_data$latitude))
# max_lon <- ceiling(max(obs_data$longitude))
# min_lon <- floor(min(obs_data$longitude))
# 
# 
# # Store boundaries in a single extent object
# geographic_extent <- ext(x = c(min_lon, max_lon, min_lat, max_lat))


```



